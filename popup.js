document.getElementById('summarize-btn').addEventListener('click', async () => { const [tab] = await chrome.tabs.query({ active: true, currentWindow: true }); // Inject content script and retrieve terms text chrome.scripting.executeScript({ target: { tabId: tab.id }, function: getTermsAndConditions, }, async (results) => { const termsText = results[0].result; if (termsText) { const summary = await summarizeTerms(termsText); document.getElementById('summary').innerText = summary; } else { document.getElementById('summary').innerText = 'No terms and conditions found.'; } }); }); function getTermsAndConditions() { const possibleSelectors = [ 'div:contains("Terms and Conditions")', 'div:contains("Terms of Service")', 'div:contains("Privacy Policy")', 'p:contains("Terms and Conditions")', 'p:contains("Terms of Service")', 'p:contains("Privacy Policy")' ]; for (let selector of possibleSelectors) { let element = document.querySelector(selector); if (element) { return element.innerText; } } return document.body.innerText; // Fallback if no specific section is found. }
